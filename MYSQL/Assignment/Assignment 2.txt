1) Create the table Member, Books and Issue without any constraints as mentioned in the schema description above.

=>i)MEMBERS TABLE
   create table members(
   Member_Id int unique,
   Member_Name varchar(30),
   Member_address varchar(50),
   Acc_Open_Date date,
   Membership_type varchar(20),
   Fees_paid int,
   Max_Books_Allowed int,
   Penalty_Amount decimal(7,2));
      
ii)BOOKS TABLE
   create table books(
   book_no int,
   book_name varchar(30),
   author_name varchar(30),
   cost decimal(7,2),
   category char(10));

iii)ISSUE_BOOKS TABLE
   create table issue_books(
   Lib_Issue_Id int,
   Book_No int,
   Member_Id int,
   Issue_Date date,
   Return_date date);


2) View the structure of the tables.

=>i)desc members;

    ii)desc books;

    iii)desc issue_books;


3) Drop the Member table

=> drop table members;


4) Create the table Member again as per the schema description with the following constraints. 
a. Member_Id – Primary Key 
b.Membership_type - ‘Lifetime’,’ Annual’, ‘Half Yearly’,’ Quarterly’

=>create table members(
    Member_Id int primary key,
    Member_Name varchar(30),
    Member_address varchar(50),
    Acc_Open_Date date,
    Membership_type varchar(20) check(Membership_type in('Lifetime', 'Annual', 'Half Yearly', 'Quarterly')),
    Fees_paid int,
    Max_Books_Allowed int,
    Penalty_Amount decimal(7,2));


5) Modify the table Member increase the width of the member name to 30 characters.

=>alter table members
    modify member_name char(30);


6) Add a column named as Reference of Char(30) to Issue table.

=>alter table issue_books
    add column reference char(30);


7) Delete/Drop the column Reference from Issue.

=> alter table issue_books
    drop column reference;


8) Rename the table Issue to Lib_Issue.

=> rename table issue_books to  Lib_Issue;
 
9) Insert following data in table Member 

=>insert into members values(1,"Richa Sharma","Pune","10-12-05","lifetime",25000,5,50);
    insert into members(member_id,member_name,Member_address,Acc_Open_Date ,Membership_type, Fees_paid,Max_Books_Allowed) 
    values(2,"Garima Sen","Pune","2025-08-04","annual",1000,3);


11)  Modify the column Member_name. Decrease the width of the member  name to 20 characters. (If it does not allow state the reason for that) 

=>alter table members
    modify column Member_name char(20);



12) Try to insert a record with Max_Books_Allowed = 110, Observe   the error that comes.

=>insert into members values(3,"sneha todkar","Pune","11-11-06","lifetime",25000,110,50);

  
13) Generate another table named Member101 using a Create command along with a simple SQL query on member table. 

=>create table member101(
    member_id int primary key,
    member_name char(20),
    member_address varchar(50),
    acc_open_date date,
    membership_type varchar(20),
    fees_paid int,
    max_bboks_allowed int,
    penalty_amt decimal(7,2));



14) Add the constraints on columns max_books_allowed  and penalty_amt as follows 
a. max_books_allowed  < 100 
b. penalty_amt maximum 1000 
Also give names to the constraints. 

=>alter table members add constraint members_chk_max_bookallowed check(Max_Books_Allowed<100);
   alter table members add constraint members_chk_penlty_amt check(Penalty_Amount<=1000);

15) Drop the table books. 

=>drop table books;

16) Create table Books again as per the schema description with the following constraints. 
a. Book_No – Primary Key 
b. Book_Name – Not Null 
c. Category – System, Fiction, Database, RDBMS, Others.

=> create table books(
    book_no int primary key,
    book_name varchar(30) not null,
    author_name varchar(30),
    cost decimal(7,2),
    category char(10) check(category in('System', 'Fiction', 'Database', 'RDBMS', 'Others')));
 
17) Insert data in Book table as follows: 

=>insert into books values
    (101,"Let us C","Denis Ritchie",450,"System"),
    (102,"Oracle-Complete Ref","Loni",550,"Database"),
    (103,"Mastering","Loni",250,"Database"),
    (104,"PL SQL-Ref","Scott Urman",750,"Database");



18) Insert more records in Book table.
(this query after do auto increment to book_no)
=> insert into books
    (book_name,author_name,cost,category)values
    ("MYSQL","sneha todkar",850,"RDBMS"),
    ("Operating System","Sakshi Kanojiya",950,"System"),
    ("Software Testing","Yash Todkar",350,"Fiction");


19) View the data in the tables using simple SQL query. 

=> table books;


20) Insert into Book following data. 105,  National Geographic, Adis Scott, 1000,  Science 

=>insert into books values
    (105,"National Geographic","Adis Scott",1000,"Science");
    ERROR 3819 (HY000): Check constraint 'books_chk_1' is violated.

    insert into books values
    (105,"National Geographic","Adis Scott",1000,"Fiction");


21) Rename the table Lib_Issue to Issue. 

=>rename table Lib_Issue to issue;


22) Drop table Issue. 

=>drop table issue;


23) As per the given structure Create table Issue again with following 
constraints. 
Lib_Issue_Id-Primary key 
Book_No-  foreign key 
Member_id - foreign key 
Issue_date 
Return_date 

=>create table issue(
    Lib_Issue_Id int primary key,
    Book_no int,
    Member_id int,
    Issue_date date,
    Return_date date,
    foreign key (Book_no) references books(Book_no),
    foreign key (Member_id) references members(Member_id));

24)  Insert following data into Issue table.  

=> insert into issue (Lib_Issue_Id,Book_no,Member_id,Issue_date)
    values(7002,102,2,str_to_date('25-dec-06','%d-%b-%y')),
    (7003,104,1,str_to_date('15-Jan-06','%d-%b-%y')),
    (7004,101,1,str_to_date('04-Jul-06','%d-%b-%y')),
    (7005,104,2,str_to_date('15-Nov-06','%d-%b-%y')),
    (7006,101,3,str_to_date('18-Feb-06','%d-%b-%y'));


25) Remove the constraints on Issue table

=> alter table issue
    drop constraint issue_ibfk_1;

     alter table issue
    drop constraint issue_ibfk_2;

26) Insert a record in Issue table. The member_id should not exist in  member table. 

=>insert into issue
    (Lib_Issue_Id,Book_no,Member_id,Issue_date)
    values(7007,107,7,str_to_date('27-Mar-05','%d-%b-%y'));

27) Now enable the constraints of Issue table. Observe the error 

=>alter table issue
    add foreign key(Member_Id)
    references members(Member_Id);
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails 
(`fbsmysqlwork`.`#sql-16f4_c`, CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`Member_id`) REFERENCES `members` (`Member_Id`))



28) Delete the record inserted at Q-27) and enable the constraints. 

=>delete from issue
    where Lib_Issue_Id=7007;

    alter table issue
    add foreign key(Member_Id)
    references members(Member_Id);



29) Try to delete the record of member id 1 from member table and  
observe the error . 

=>delete from members
    -> where Member_Id=1;
ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails
(`fbsmysqlwork`.`issue`, CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`Member_id`) REFERENCES `members` (`Member_Id`))


30) View the data and structure of all the three tables Member,  
Issue, Book. 
(view data)
=>table members;
    table books;
    table issue;
(view structure)
    desc members;
    desc books;
    desc iuuse;


 
31) Modify the Return_Date of 7004,7005 to 15 days after the    
Issue_date. 

=>update issue
    set Return_date=date_add(Issue_date,interval 15 day)
    where Lib_issue_id in(7004,7005);



32) Remove all the records from Issue table where member_ID is 1  
and Issue date in before 10-Dec-06. 

=> delete from issue
    where member_id=1 and issue_date<'2006-12-10';



33) Remove all the records from Book table with category other   
than RDBMS and Database.

=>delete from books
    where category not in('RDBMS','Database');
    ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails 
    (`fbsmysqlwork`.`issue`, CONSTRAINT `issue_ibfk_1` FOREIGN KEY (`Book_no`) REFERENCES `books` (`book_no`))



34) Remove the table Member. 

=>drop table members;
    ERROR 3730 (HY000): Cannot drop table 'members' referenced by a foreign key constraint 'issue_ibfk_2' on table 'issue'.



35) Remove the table Book.

=>drop table books;
ERROR 3730 (HY000): Cannot drop table 'books' referenced by a foreign key constraint 'issue_ibfk_1' on table 'issue'.